pipeline {
  agent any
  stages {
    stage('Test job') {
      steps {
        parallel(
          "Testing": {mvn test},
          "Test in parallel": {echo 'testing...'}
        )
      }
    }
    stage('Coverage Code job') {
      steps {
        parallel(
          "run Coverage code test": {mvn cobertura:cobertura},
          "Run in parallel": {echo 'coverage code evaluation...'}
        )
      }
    }
    stage('Static code analysis job') {
      steps {
        parallel(
          "run Static code analysis": {mvn pmd:pmd},
          "Run in parallel": {echo 'Static code analysis...'}
        )
      }
    }
    stage('Package (.war) & Release job') {
      steps {
        parallel(
          "package": {mvn install},
          "Run in parallel": {echo 'packaging...'}
        )
      }
    }
    stage('Approve Job') {
      steps {
        input 'deploy to staging?'
      }
    }
    stage('Deploy Job') {
      steps {
            echo 'deployment done.'
          }
      }
    }
  }
